#!/bin/bash

(( $# != 1 )) && echo "Usage: $0 targetIP" && exit
ip=$1
echo "unicornscan $ip:1-65535..."
printf "%0.0s-" $(seq $(tput cols))
tcpList=$(echo $(unicornscan $ip:1-65535 | cut -d"]" -f1 | cut -d"[" -f2) | sed 's| |,|g')
echo -e "TCP: $tcpList"
echo""

echo "nmap -A -Pn $ip  -p $tcpList..."
printf "%0.0s-" $(seq $(tput cols))
nmap -A -Pn $ip -p $tcpList
echo""

echo "unicornscan -mU $ip:1-65535..."
printf "%0.0s-" $(seq $(tput cols))
udpList=$(echo $(unicornscan -mU $ip:1-65535 | cut -d"]" -f1 | cut -d"[" -f2) | sed 's| |,|g')
echo "UDP: $udpList"
echo""

echo "nmap -A -Pn -sU $ip -p $udpList..."
printf "%0.0s-" $(seq $(tput cols))
nmap -A -Pn -sU $ip -p $udpList

#or oneliner for TCP ot UDP
#nmap $ip -A -p $(echo $(unicornscan $ip:1-65535 | cut -d"]" -f1 | cut -d"[" -f2) | sed 's| |,|g')
#nmap $ip -A -sU -p $(echo $(unicornscan -mU $ip:1-65535 | cut -d"]" -f1 | cut -d"[" -f2) | sed 's| |,|g')